CREATE TABLE PRODUCTO (ID_PRODUCTO INTEGER, DESCRIPCION VARCHAR2(120),
MARCA VARCHAR2(80), CATEGORIA VARCHAR2(80), PRECIO FLOAT,
CONSTRAINT ID_PRODUCTO_PK PRIMARY KEY(ID_PRODUCTO));

CREATE SEQUENCE SEC_PRODUCTO
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

/*
GENERAR UN PROCEDIMIENTO ALMACENADO QUE GUARDE UN PRODUCTO CON SUS RESPECTIVOS 
CAMPOS USAR LA SECUENCIA PARA INCREMENTAR EL ID
*/
CREATE OR REPLACE PROCEDURE GUARDAR_PRODUCTO 
(
  MY_ID_PRODUCTO OUT NUMBER  
, MY_DESCRIPCION IN VARCHAR2  
, MY_MARCA IN VARCHAR2   
, MY_CATEGORIA IN VARCHAR2  
, MY_PRECIO IN FLOAT
) AS 
BEGIN
  SELECT SEC_PRODUCTO.NEXTVAL INTO MY_ID_PRODUCTO FROM DUAL;
  INSERT INTO PRODUCTO VALUES(MY_ID_PRODUCTO, MY_DESCRIPCION,MY_MARCA, MY_CATEGORIA, MY_PRECIO);
END GUARDAR_PRODUCTO;
/
/*
GENERAR 5 PRODUCTOS MARINELA QUE DESEES
*/

DECLARE
VALOR INTEGER;
BEGIN
GUARDAR_PRODUCTO(VALOR, 'BARRITAS','MARINELA','PAN',16);
END;
/
SELECT * FROM PRODUCTO;
/*
GENERAR UN PROCEDIMIENTO ALMACENADO QUE ITERE LA TABLA ANTERIOR E IMPRIMA LA
DESCRIPCION DE LOS PRODUCTO GUARDADOS Y SU PRECIO DEBERA TENER UN TIPO DE SALIDA 
DICHO PROCEDIMIENTO EN EL CUAL SE SUMEN TODOS LOS PRECIOS DE LOS PRODUCTOS
GUARDADOS (USAR CURSOR DE SOLO LECTURA)
*/

CREATE OR REPLACE PROCEDURE IMPRIMIR(VALOR IN VARCHAR2) AS 
BEGIN
DBMS_OUTPUT.PUT_LINE(VALOR);
END;
/

CREATE OR REPLACE PROCEDURE REPORTE (TOTAL OUT FLOAT)
AS
CURSOR CUR_PRODUCTO IS SELECT * FROM PRODUCTO;
BEGIN
  TOTAL:=0;
  FOR REC IN CUR_PRODUCTO LOOP
  TOTAL:=TOTAL+REC.PRECIO;
  IMPRIMIR('DESCRIPCION: '||REC.DESCRIPCION||'PRECIO:'||REC.PRECIO);
  END LOOP;
END;
/
--INVOCAMOS
SET SERVEROUTPUT ON;
DECLARE 
VALOR FLOAT;
BEGIN
REPORTE(VALOR);
IMPRIMIR('SUMATORIA TOTAL: '||VALOR);
END;
/

